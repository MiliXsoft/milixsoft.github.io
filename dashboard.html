<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard - MiliXsoft</title>
<link rel="stylesheet" href="dashboard.css">
</head>
<body>

<div class="layout">

  <aside class="sidebar">
    <h2 class="logo">MiliXsoft</h2>

    <button class="nav-item" onclick="window.location.href='dashboard.html'">ğŸ  Strona gÅ‚Ã³wna</button>
    <button class="nav-item" onclick="window.location.href='settings.html'">âš™ï¸ Ustawienia</button>
    <button class="nav-item" id="logoutBtn">ğŸšª Wyloguj</button>

    <div class="profile">
      <img id="avatarDisplay" src="default.png">
      <div class="profile-name" id="nicknameDisplay">Åadowanie...</div>
      <div class="profile-email" id="emailDisplay">...</div>
    </div>
  </aside>

  <main class="content">
    <h1>Witaj w panelu!</h1>
    <p>Tu pojawiÄ… siÄ™ funkcje Twojej strony.</p>
  </main>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  import { auth, db } from "./firebaseConfig.js";
  import { createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
// âœ… â†‘â†‘â†‘ NIE ZAPOMNIJ

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Pobieranie danych uÅ¼ytkownika
onAuthStateChanged(auth, async (user) => {
  if (!user) return (window.location.href = "index.html");

  const userRef = doc(db, "users", user.uid);
  const userSnap = await getDoc(userRef);

  // nickname / avatar / email
  document.getElementById("emailDisplay").textContent = user.email;

  if (userSnap.exists()) {
    const data = userSnap.data();
    document.getElementById("nicknameDisplay").textContent = data.nickname || user.email;
    if (data.avatar) document.getElementById("avatarDisplay").src = data.avatar;
  }
});

// Wylogowanie
document.getElementById("logoutBtn").onclick = () => {
  signOut(auth).then(() => (window.location.href = "index.html"));
};
</script>

</body>
</html>
